<ng-template #tmplNode let-node="node">
  <div class="node-item">
    <div class="node-title" fxLayout="row">
      <span *ngIf="node.children.length">
        <button mat-icon-button (click)="node.isExpanded=!node.isExpanded">
          <mat-icon *ngIf="!node.isExpanded" [matTooltipPosition]="'above'" [matTooltipHideDelay]="0" [matTooltipShowDelay]="500"
          matTooltip="Prikaži podkomponente">add_circle</mat-icon>
          <mat-icon *ngIf="node.isExpanded" [matTooltipPosition]="'above'" [matTooltipHideDelay]="0" [matTooltipShowDelay]="500"
          matTooltip="Sakrij podkomponente">remove_circle</mat-icon>
        </button>
      </span>
      <span *ngIf="!node.children.length" style="cursor: default;">
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      </span>
      <mat-card fxFlex fxLayout="row">
        <span fxFlex>({{node.order}}) <b>{{node.code}}</b> : {{node.name}}</span>
        <span>
          <button mat-mini-fab (click)="editKc(node.id)" color="accent">
            <mat-icon matTooltip="Ažuriraj" [matTooltipPosition]="'above'" [matTooltipHideDelay]="0" [matTooltipShowDelay]="500">edit</mat-icon>
        </button>
        </span>
      </mat-card>
    </div>
  
    <div *ngIf="node.isExpanded && node.children.length" class="node-children">
      <div *ngFor="let child of node.children">
        <ng-container *ngTemplateOutlet="tmplNode,context:{node:child}"></ng-container>  
      </div>
    </div>
  </div>
</ng-template>
  
<div>
  <div *ngFor="let node of nodes">
    <ng-container *ngTemplateOutlet="tmplNode,context:{node:node}"></ng-container>
  </div>
</div>